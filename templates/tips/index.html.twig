{% extends 'base.html.twig' %}

{% block title %}Tips{% endblock %}

{% block body %}
    <div id="scroll-to-top"></div>
    <h1 class="mt-5">Tips</h1>

    <section class="content">
        <div class="cards d-flex flex-wrap mt-5">
            {% for tip in tips %}
                <div class="card mb-5">
                    <div class="card__side card__side--front card__side--front-1">
                        <div class="card__description">
                            <h2>{{ tip.name }}</h2>
                            <img
                                class="card-image"
                                src="https://images.unsplash.com/photo-1515879218367-8466d910aaa4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80"
                                alt="image uploded by user"
                            >
                        </div>
                    </div>
                    <div class="card__side card__side--back card__side--back-1">
                        {{ include('tips/_delete_form.html.twig') }}
                        <div class="card__description">
                            <div class="description">
                                <div class="absolute-clipboard d-flex justify-content-center align-items-center">
                                    <img
                                        src="{{ asset('build/copy.svg') }}"
                                        alt="copyToClipboard"
                                        onclick="maFonction({{ tip.id }})"
                                    />
                                    <script>
                                        const maFonction = (id) => {
                                            const copyText = document.getElementById(id);
                                            copyText.select();
                                            copyText.setSelectionRange(0, 99999);
                                            document.execCommand("copy");
                                            alert("Copied the text: " + copyText.value);
                                        }
                                    </script>
                                </div>
                                <div id="{{ tip.id }}">
                                    {{ tip.description | slice(0, 120) }}...
                                </div>
                            </div>
                            <div
                                class="footer-card col-12 d-flex flex-column flex-md-row justify-content-between align-items-center">
                                <div class="px-2 flex-wrap d-flex flex-row align-items-center">
                                    {# TODO : make a loop #}
                                    <span class="circle-language mb-md-0 language mr-2">
                                        <img
                                            src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/CSS3_logo_and_wordmark.svg/1200px-CSS3_logo_and_wordmark.svg.png"
                                            alt="uploaded-by-user"
                                        >
                                    </span>
                                </div>
                                <div class="px-2 button-group d-flex flex-row align-items-center">
                                    <button class="card-button">
                                        <a href="{{ path('tips_show', {'id': tip.id}) }}">
                                            Détail
                                        </a>
                                    </button>
                                    <button class="ml-2 card-button">
                                        <a href="{{ path('tips_edit', {'id': tip.id}) }}">
                                            Modifier
                                        </a>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% else %}
                <tr>
                    <td colspan="6">Aucun Résultat</td>
                </tr>
            {% endfor %}
        </div>
        <div class="d-flex justify-content-center align-items-center">
            <button class="card-button mt-5 ml-5 mb-5">
                <a href="{{ path('tips_new') }}">Ajouter un Tip</a>
            </button>
        </div>
        <div id="scroll_to_top">
            <a href="#scroll_to_top">
                <i class="arrow far fa-lg-arrow-alt-circle-up"></i>
            </a>
        </div>
    </section>

{% endblock %}
